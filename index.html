<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø°ÙƒÙŠ ÙˆØ§Ù„Ù…Ø¹Ø§ØµØ±</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <style>
        /* ========================================================= */
        /* Ø§Ù„Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¹Ø§Ù…Ø© ÙˆØ¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */
        /* ========================================================= */
        
        .material-symbols-rounded {
          font-variation-settings:
          'FILL' 0,
          'wght' 400,
          'GRAD' 0,
          'opsz' 24;
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ (Default) */
        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff;
            display: flex; 
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            color: #333;
            transition: background-color 0.4s, color 0.4s;
            overflow: hidden; 
        }

        /* Ø­Ø§ÙˆÙŠØ© Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginScreen {
            background-color: transparent; 
            padding: 40px 20px;
            width: 90%;
            max-width: 650px; 
            text-align: center;
        }
        
        h1 { 
            color: #007bff; 
            margin-bottom: 30px; 
            font-size: 28px;
            padding-bottom: 10px;
            border-bottom: 3px solid #007bff;
            display: inline-block;
            transition: color 0.4s, border-color 0.4s;
        }
        
        hr { 
            border: 0; 
            height: 1px; 
            background-image: linear-gradient(to right, rgba(0, 0, 0, 0), #007bff, rgba(0, 0, 0, 0));
            margin: 30px 0; 
            transition: background-image 0.4s;
        }
        
        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        input[type="text"] {
            width: 90%; 
            padding: 15px; 
            margin-bottom: 20px; 
            border: 1px solid #ddd;
            border-radius: 10px; 
            font-size: 17px; 
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.4s, color 0.4s;
            text-align: right;
            background-color: #f9f9f9; 
            color: #333; 
        }
        input[type="text"]:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
            outline: none;
        }

        /* Ø²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginButton {
            background-color: #28a745; 
            color: white; 
            border: none;
            padding: 15px 40px; 
            border-radius: 10px; 
            cursor: pointer;
            font-size: 19px; 
            font-weight: bold; 
            letter-spacing: 1px;
            transition: background-color 0.3s, transform 0.1s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.4);
        }
        #loginButton:hover { background-color: #218838; box-shadow: 0 3px 10px rgba(40, 167, 69, 0.6); }
        #loginButton:active { transform: scale(0.98); }

        /* ========================================================= */
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† (Dark Mode) */
        /* ========================================================= */
        .dark-mode {
            background-color: #121212; 
            color: #e0e0e0; 
        }

        .dark-mode h1 {
            color: #90caf9; 
            border-bottom: 3px solid #90caf9;
        }
        
        .dark-mode hr {
            background-image: linear-gradient(to right, rgba(255, 255, 255, 0), #555, rgba(255, 255, 255, 0));
        }

        .dark-mode input[type="text"] {
            background-color: #2e2e2e; 
            color: #e0e0e0;
            border: 1px solid #555;
        }
        
        .dark-mode input[type="text"]:focus {
            border-color: #90caf9;
            box-shadow: 0 0 0 3px rgba(144, 202, 249, 0.25);
        }

        /* ========================================================= */
        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø²ÙˆØ§ÙŠØ§ Ø§Ù„Ø¹Ù„ÙˆÙŠØ© - Ø¸Ø§Ù‡Ø±Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
        /* ========================================================= */
        #modeToggleButton {
            position: absolute; top: 25px; left: 25px;
            background-color: #007bff; color: white; border: none;
            width: 45px; height: 45px; padding: 0; border-radius: 8px;
            cursor: pointer; font-size: 20px; display: flex;
            justify-content: center; align-items: center; transition: background-color 0.3s;
            z-index: 1000;
        }
        #modeToggleButton:hover { background-color: #0056b3; }
        
        #settingsButton {
            position: absolute; top: 25px; right: 25px; background: none; border: none;
            color: #333; cursor: pointer; font-size: 28px; width: 45px; height: 45px;
            display: flex; justify-content: center; align-items: center; transition: color 0.3s, transform 0.2s;
            z-index: 1000;
        }
        #settingsButton:hover { color: #007bff; transform: rotate(30deg); }
        .dark-mode #settingsButton { color: #e0e0e0; }
        .dark-mode #settingsButton:hover { color: #90caf9; }
        
        #savedCodesButton {
            position: absolute; top: 25px; right: 80px; background: none; border: none;
            color: #333; cursor: pointer; font-size: 28px; width: 45px; height: 45px;
            display: flex; justify-content: center; align-items: center; transition: color 0.3s, transform 0.2s;
            z-index: 1000;
        }

        #savedCodesButton:hover { color: #28a745; transform: scale(1.1); }
        .dark-mode #savedCodesButton { color: #e0e0e0; }
        .dark-mode #savedCodesButton:hover { color: #4CAF50; }

        /* Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ (Exit Button) */
        #exitButton {
            position: fixed; top: 20px; left: 20px; 
            background: #dc3545; color: white; border: none;
            border-radius: 50%; width: 55px; height: 55px; font-size: 24px;
            cursor: move; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 1000; display: none; transition: background 0.2s; 
        }
        #exitButton:hover { background: #c82333; }
        
        /* ========================================================= */
        /* Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ (Modal) Ù„Ù€ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© */
        /* ========================================================= */
        .modal {
            display: none; 
            position: fixed; z-index: 2000; left: 0; top: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5); 
            backdrop-filter: blur(5px);
            justify-content: center; align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 800px; /* Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¹Ø±Ø¶ Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
            position: relative;
            animation: fadeIn 0.3s;
        }

        .dark-mode .modal-content {
            background-color: #1e1e1e;
            color: #fefefe;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø±Ø¨Ø¹ */
        .close-button {
            color: #aaa;
            float: left; 
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        .close-button:hover, .close-button:focus { color: #000; text-decoration: none; }
        .dark-mode .close-button:hover { color: #fff; }


        /* ========================================================= */
        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹ØµØ±ÙŠ (Saved Codes Table) */
        /* ========================================================= */
        #savedCodesTable {
            width: 100%;
            border-collapse: separate; /* Ù„ÙØµÙ„ Ø§Ù„Ø­Ø¯ÙˆØ¯ ÙˆØ¥Ø¹Ø·Ø§Ø¡ Ø­Ø¯ÙˆØ¯ Ø¯Ø§Ø¦Ø±ÙŠØ© */
            border-spacing: 0 8px; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„ØµÙÙˆÙ */
            margin-top: 20px;
            text-align: right;
        }
        
        /* Ø±Ø¤ÙˆØ³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ (Header) */
        #savedCodesTable th {
            background-color: #007bff;
            color: white;
            padding: 15px 10px;
            text-align: center;
            font-weight: 700;
            font-size: 16px;
            position: sticky; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø±Ø¤ÙˆØ³ Ø«Ø§Ø¨ØªØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            top: 0;
            z-index: 10;
        }
        
        /* Ø¶Ø¨Ø· Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø¯Ø§Ø¦Ø±ÙŠØ© Ù„Ø±Ø¤ÙˆØ³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        #savedCodesTable thead tr th:first-child { border-top-right-radius: 8px; }
        #savedCodesTable thead tr th:last-child { border-top-left-radius: 8px; }

        /* Ø®Ù„Ø§ÙŠØ§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        #savedCodesTable td {
            background-color: #f9f9f9;
            padding: 12px 10px;
            text-align: center;
            border: none;
            transition: background-color 0.3s;
        }
        
        /* Ø§Ù„ØµÙÙˆÙ (Rows) */
        #savedCodesTable tbody tr {
            box-shadow: 0 1px 5px rgba(0, 0, 0, 0.05);
        }

        /* ØªØ£Ø«ÙŠØ± Hover Ø¹Ù„Ù‰ Ø§Ù„ØµÙ */
        #savedCodesTable tbody tr:hover td {
            background-color: #e6f7ff; /* Ù„ÙˆÙ† ÙØ§ØªØ­ Ø¹Ù†Ø¯ Ø§Ù„Ù…Ø±ÙˆØ± */
        }

        /* Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† Ù„Ù„Ø¬Ø¯ÙˆÙ„ */
        .dark-mode #savedCodesTable th {
            background-color: #4a4e69;
        }
        .dark-mode #savedCodesTable td {
            background-color: #2e2e2e;
            color: #e0e0e0;
        }
        .dark-mode #savedCodesTable tbody tr:hover td {
            background-color: #3b3f54;
        }

        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¶ (Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ù„ÙƒÙˆØ¯) */
        .url-cell {
            font-size: 14px;
            text-align: right;
            color: #007bff;
            max-width: 300px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .code-cell {
            font-weight: bold;
            color: #28a745;
        }

        /* Ø²Ø± Ø§Ù„ÙØªØ­ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ - Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙÙ‚Ø· Ù…Ø¹ Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© */
        .open-code-btn {
            background-color: transparent; /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© */
            color: #007bff; /* Ù„ÙˆÙ† Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            border: none;
            padding: 6px; /* ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø­Ø´ÙˆØ© */
            border-radius: 50%; /* Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ø±ÙŠ */
            cursor: pointer;
            font-size: 18px; /* Ø­Ø¬Ù… Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 36px; /* Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª */
            height: 36px; /* Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª */
            transition: all 0.3s ease;
        }
        .open-code-btn:hover { 
            background-color: rgba(0, 123, 255, 0.1); /* Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            color: #0056b3; /* Ù„ÙˆÙ† Ø£ØºÙ…Ù‚ Ø¹Ù†Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ± */
            transform: scale(1.1); /* ØªÙƒØ¨ÙŠØ± Ø¨Ø³ÙŠØ· */
        }
        
        /* Ø²Ø± Ø§Ù„Ù…Ø³Ø­ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .delete-code-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-right: 5px;
            transition: background-color 0.3s;
        }
        .delete-code-btn:hover { background-color: #c82333; }
        
        /* Ø¨Ø§Ù‚ÙŠ Ø£Ù†Ù…Ø§Ø· Iframe Ùˆ Toast */
        #websiteContainer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 999; background-color: #000; }
        #websiteFrame { width: 100%; height: 100%; border: none; }
        #toastNotification { position: fixed; top: 20px; right: 20px; background-color: #333; color: white; padding: 15px 20px; border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); opacity: 0; transition: opacity 0.5s, transform 0.5s; transform: translateY(-50px); z-index: 1001; font-size: 16px; min-width: 250px; text-align: center; }
        .show-toast { opacity: 1 !important; transform: translateY(0) !important; }

    </style>
</head>
<body>
    
    <button id="modeToggleButton"></button>

    <button id="settingsButton">
        <span class="material-symbols-rounded">settings</span>
    </button>
    
    <button id="savedCodesButton">
        <span class="material-symbols-rounded">download</span>
    </button>

    <div id="loginScreen">
        <h1><span class="material-symbols-rounded">key</span> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø°ÙƒÙŠ</h1>
        
        <input type="text" id="accessCode" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: 123.456.789 Ø£Ùˆ 11342)">
        
        <button id="loginButton">Ø¯Ø®ÙˆÙ„ ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø±Ù…Ø²</button>
        <hr>
    </div>

    <div id="savedCodesModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2><span class="material-symbols-rounded">archive</span> Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
            <div style="max-height: 400px; overflow-y: auto;">
                <table id="savedCodesTable">
                    <thead>
                        <tr>
                            <th style="width: 10%;">#</th>
                            <th style="width: 45%;">Ø§Ù„Ø§Ø³Ù… / Ø§Ù„Ø±Ø§Ø¨Ø·</th>
                            <th style="width: 15%;">Ø§Ù„ÙƒÙˆØ¯</th>
                            <th style="width: 30%;">Ø§Ù„ØªØ­ÙƒÙ…</th>
                        </tr>
                    </thead>
                    <tbody id="savedCodesList">
                        </tbody>
                </table>
            </div>
            
        </div>
    </div>

    <div id="toastNotification"></div>
    <div id="websiteContainer">
        <iframe id="websiteFrame" src="" title="Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ"></iframe>
    </div>

    <button id="exitButton"><span class="material-symbols-rounded">close</span></button>

    <script>
        // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯
        const ACCESS_URL_DEFAULT = "https://fkhames819-cloud.github.io/ALGEL-ALKHAMES/";
        const SAVED_CODES_KEY = "algil_alkhames_codes";

        // =========================================================
        // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ 1: Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒØ§Ø¦Ù†Ø§Øª Ù„Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø®ØµØµ
        // =========================================================
        const SAVABLE_CODES_MAP = {
            "123.456.789": { 
                url: "https://fkhames819-cloud.github.io/ALGEL-ALKHAMES/", 
                name: "Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø§Ù…Ø³)" 
            },
            "987.654.321": { 
                url: "https://example.com/page1", 
                name: "ØµÙØ­Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© 1" 
            }, 
            "111.222.333": { 
                url: "https://anothersite.net/pageA", 
                name: "ØµÙØ­Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© A" 
            }, 
            "11342": { 
                url: "https://poki.com/ar/", 
                name: "Ø£Ù„Ø¹Ø§Ø¨ Ø¨ÙˆÙƒÙŠ (Poki)" 
            },
            "12345": { 
                url: "https://www.youtube.com/", 
                name: "ÙŠÙˆØªÙŠÙˆØ¨" 
            }
        };
        
        const DIRECT_ENTRY_CODES_MAP = {
            "121.324.543": "https://fkhames819-cloud.github.io/ALGEL-ALKHAMES/",
            "444.555.666": "https://quick-access.org/q1", 
            "000.111.222": "https://tools-site.com/t2" 
        };

        const loginScreen = document.getElementById('loginScreen');
        const websiteContainer = document.getElementById('websiteContainer');
        const websiteFrame = document.getElementById('websiteFrame');
        const codeInput = document.getElementById('accessCode');
        const loginButton = document.getElementById('loginButton');
        const exitButton = document.getElementById('exitButton');
        const toastNotification = document.getElementById('toastNotification'); 
        
        const modeToggleButton = document.getElementById('modeToggleButton'); 
        const settingsButton = document.getElementById('settingsButton'); 
        
        // ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ø­ÙÙˆØ¸Ø§Øª
        const savedCodesButton = document.getElementById('savedCodesButton');
        const savedCodesModal = document.getElementById('savedCodesModal');
        const savedCodesList = document.getElementById('savedCodesList');
        const modalCloseButton = savedCodesModal.querySelector('.close-button');


        const body = document.body;
        
        const ICON_LIGHT = '<span class="material-symbols-rounded">light_mode</span>';
        const ICON_DARK = '<span class="material-symbols-rounded">dark_mode</span>';

        let isDragging = false;
        let offset = { x: 0, y: 0 };
        let lastClickTime = 0; 

        // =========================================================
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
        // =========================================================
        function hideTopButtons() {
            modeToggleButton.style.display = 'none';
            settingsButton.style.display = 'none';
            savedCodesButton.style.display = 'none';
        }

        // =========================================================
        // Ø¯Ø§Ù„Ø© Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ©
        // =========================================================
        function showTopButtons() {
            modeToggleButton.style.display = 'flex';
            settingsButton.style.display = 'flex';
            savedCodesButton.style.display = 'flex';
        }

        // =========================================================
        // Ù…Ù†Ø·Ù‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø§ÙƒÙ† (Dark Mode Logic) 
        // =========================================================

        function toggleDarkMode() {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            modeToggleButton.innerHTML = isDarkMode ? ICON_LIGHT : ICON_DARK;
            localStorage.setItem('themeMode', isDarkMode ? 'dark' : 'light');
        }

        function applySavedMode() {
            const savedMode = localStorage.getItem('themeMode');
            if (savedMode === 'dark') {
                body.classList.add('dark-mode');
                modeToggleButton.innerHTML = ICON_LIGHT;
            } else {
                 modeToggleButton.innerHTML = ICON_DARK;
            }
        }

        modeToggleButton.addEventListener('click', toggleDarkMode);
        applySavedMode();
        
        settingsButton.addEventListener('click', () => {
             showToast("ğŸ› ï¸ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª! (Ø§Ù„ÙˆØ¸ÙŠÙØ© ØºÙŠØ± Ù…ÙØ¹Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹)");
        });


        // =========================================================
        // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© (Saved Codes Logic)
        // =========================================================
        
        function showToast(message) {
            toastNotification.textContent = message;
            toastNotification.classList.add('show-toast');
            
            setTimeout(() => {
                toastNotification.classList.remove('show-toast');
            }, 3000);
        }

        function getSavedCodes() {
            try {
                const codes = localStorage.getItem(SAVED_CODES_KEY);
                return codes ? JSON.parse(codes) : [];
            } catch (e) {
                console.error("Error reading LocalStorage:", e);
                return [];
            }
        }

        // =========================================================
        // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ 2: ØªØ¹Ø¯ÙŠÙ„ Ø¯Ø§Ù„Ø© Ø§Ù„Ø­ÙØ¸ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø®ØµØµ
        // =========================================================
        function saveCode(code) {
            const codes = getSavedCodes();
            const codeData = SAVABLE_CODES_MAP[code]; // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„ÙƒØ§Ø¦Ù† ÙƒØ§Ù…Ù„Ø§Ù‹
            
            if (codeData && !codes.find(item => item.code === code)) {
                const id = Date.now().toString(); 
                
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ù…Ø®ØµØµ (codeData.name) ÙˆØ§Ù„Ø±Ø§Ø¨Ø· (codeData.url) Ù…Ø¨Ø§Ø´Ø±Ø©
                codes.push({ id, code, total: codeData.name, url: codeData.url });
                localStorage.setItem(SAVED_CODES_KEY, JSON.stringify(codes));
            }
        }

        // ÙˆØ¸ÙŠÙØ© Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ù…Ù† SAVABLE_CODES_MAP ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„
        function renderAllCodes() {
            savedCodesList.innerHTML = ''; // ØªÙØ±ÙŠØº Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹Ø¨Ø¦Ø©

            if (Object.keys(SAVABLE_CODES_MAP).length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td colspan="4" style="text-align: center; color: #888; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</td>';
                savedCodesList.appendChild(tr);
                return;
            }

            let index = 1;
            for (const [code, codeData] of Object.entries(SAVABLE_CODES_MAP)) {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="id-cell">${index}</td>
                    <td class="url-cell" title="${codeData.url}">${codeData.name}</td>
                    <td class="code-cell">${code}</td>
                    <td class="control-cell">
                        <button class="open-code-btn" data-code="${code}" data-url="${codeData.url}" title="ÙØªØ­ ${codeData.name}">
                            <span class="material-symbols-rounded">open_in_new</span>
                        </button>
                    </td>
                `;
                savedCodesList.appendChild(tr);
                index++;
            }

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØªØ­
            savedCodesList.querySelectorAll('.open-code-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const code = e.currentTarget.getAttribute('data-code');
                    const url = e.currentTarget.getAttribute('data-url');
                    
                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹
                    savedCodesModal.style.display = 'none';
                    enterWebsite(url, code);
                    showToast("âœ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­Ø¯Ø¯.");
                });
            });
        }

        // ÙˆØ¸ÙŠÙØ© Ù…Ø³Ø­ ÙƒÙˆØ¯ ÙˆØ§Ø­Ø¯
        function deleteSingleCode(idToDelete) {
            let codes = getSavedCodes();
            codes = codes.filter(item => item.id !== idToDelete);
            localStorage.setItem(SAVED_CODES_KEY, JSON.stringify(codes));
            renderSavedCodes(); 
            showToast("âœ… ØªÙ… Ù…Ø³Ø­ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­!");
        }

        // Ø¯Ø§Ù„Ø© Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ÙÙŠ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡ÙŠÙƒÙ„ Ø§Ù„Ø¬Ø¯ÙˆÙ„)
        function renderSavedCodes() {
            const codes = getSavedCodes();
            savedCodesList.innerHTML = ''; // ØªÙØ±ÙŠØº Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹Ø¨Ø¦Ø©

            if (codes.length === 0) {
                const tr = document.createElement('tr');
                tr.innerHTML = '<td colspan="4" style="text-align: center; color: #888; padding: 20px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙƒÙˆØ§Ø¯ Ù…Ø­ÙÙˆØ¸Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</td>';
                savedCodesList.appendChild(tr);
                return;
            }

            codes.forEach((item, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td class="id-cell">${index + 1}</td>
                    <td class="url-cell" title="${item.url}">${item.total}</td>
                    <td class="code-cell">${item.code}</td>
                    <td class="control-cell">
                        <button class="open-code-btn" data-code="${item.code}" data-url="${item.url}" title="ÙØªØ­ ${item.total}">
                            <span class="material-symbols-rounded">open_in_new</span>
                        </button>
                        <button class="delete-code-btn" data-id="${item.id}">
                            <span class="material-symbols-rounded" style="font-size: 16px;">delete</span>
                            Ù…Ø³Ø­
                        </button>
                    </td>
                `;
                savedCodesList.appendChild(tr);
            });

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ÙØªØ­
            savedCodesList.querySelectorAll('.open-code-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const code = e.currentTarget.getAttribute('data-code');
                    const url = e.currentTarget.getAttribute('data-url');
                    
                    // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ ÙˆØ§Ù„Ø¯Ø®ÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹
                    savedCodesModal.style.display = 'none';
                    enterWebsite(url, code);
                    showToast("âœ… Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸.");
                });
            });
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ø§Ù„Ø¬ Ø­Ø¯Ø« Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù…Ø³Ø­
            savedCodesList.querySelectorAll('.delete-code-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const idToDelete = e.currentTarget.getAttribute('data-id');
                    const itemToDelete = codes.find(item => item.id === idToDelete);
                    const confirmation = confirm(`Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ ØµÙØ­Ø© "${itemToDelete.total}"ØŸ`);
                    if (confirmation) {
                         deleteSingleCode(idToDelete);
                    }
                });
            });
        }
        
        // Ø¯Ø§Ù„Ø© ÙØªØ­ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ ÙˆØ¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯
        savedCodesButton.addEventListener('click', () => {
            renderAllCodes(); // Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ù…Ù† SAVABLE_CODES_MAP
            savedCodesModal.style.display = 'flex'; // Ø§Ø³ØªØ®Ø¯Ø§Ù… flex Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
        });

        // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© X
        modalCloseButton.addEventListener('click', () => {
            savedCodesModal.style.display = 'none';
        });

        // Ø¯Ø§Ù„Ø© Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„Ù…Ù†Ø¨Ø«Ù‚ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬ Ø§Ù„Ù…Ø±Ø¨Ø¹
        window.addEventListener('click', (event) => {
            if (event.target === savedCodesModal) {
                savedCodesModal.style.display = 'none';
            }
        });


        // =========================================================
        // Ù…Ù†Ø·Ù‚ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Login Logic)
        // =========================================================

        function enterWebsite(url, code) {
            websiteFrame.src = url + `?code=${code}`; 
            
            loginScreen.style.display = 'none';
            websiteContainer.style.display = 'block'; 
            exitButton.style.display = 'block';
            document.body.style.overflow = 'hidden'; 
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„
            hideTopButtons();
        }

        loginButton.addEventListener('click', () => {
            const code = codeInput.value.trim();

            if (!code) {
                showToast("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹.");
                return;
            }

            // =========================================================
            // Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ 3: Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø§Ø¨Ù„ Ù„Ù„Ø­ÙØ¸ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ (ÙƒÙƒØ§Ø¦Ù†)
            // =========================================================
            const knownSavableCodeData = SAVABLE_CODES_MAP[code]; 
            const knownDirectCode = DIRECT_ENTRY_CODES_MAP[code]; 
            const isSavedCode = getSavedCodes().some(item => item.code === code); 
            
            if (knownDirectCode) {
                showToast("âœ… ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø®Ø§Øµ. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±...");
                enterWebsite(knownDirectCode, code); 
            } 
            else if (knownSavableCodeData) {
                if (!isSavedCode) {
                    saveCode(code); 
                    renderSavedCodes(); // Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙÙˆØ±Ø§Ù‹
                    showToast(`â• ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯ Ø¨Ù†Ø¬Ø§Ø­. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...`);
                } else {
                    showToast("âœ… ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...");
                }
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… knownSavableCodeData.url Ù„Ù„Ø¯Ø®ÙˆÙ„
                enterWebsite(knownSavableCodeData.url, code);
            } 
            else if (isSavedCode) {
                const savedItem = getSavedCodes().find(item => item.code === code);
                showToast("âœ… ØªÙ… Ø§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙÙˆØ¸. Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¯Ø®ÙˆÙ„...");
                enterWebsite(savedItem.url, savedItem.code);
            } 
            else {
                showToast("âŒ Ø±Ù…Ø² Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­ Ø£Ùˆ ØºÙŠØ± Ù…Ø³Ø¬Ù‘Ù„. ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„ØµØ­ÙŠØ­ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
            }
        });

        // =========================================================
        // Ù…Ù†Ø·Ù‚ Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ (Exit Button Logic)
        // =========================================================

        function handleDoubleClickExit() {
            websiteFrame.src = "about:blank"; 
            websiteContainer.style.display = 'none';
            exitButton.style.display = 'none';
            loginScreen.style.display = 'block';
            document.body.style.overflow = 'auto'; 
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
            showTopButtons();
            
            showToast("ğŸ‘‹ ØªÙ… Ø§Ù„Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨ÙˆØ§Ø¨Ø©.");
        }

        exitButton.addEventListener('mousedown', (e) => {
            e.preventDefault(); 
            const clickTime = Date.now();
            
            if (clickTime - lastClickTime < 400) { 
                handleDoubleClickExit();
                isDragging = false; 
                return;
            }
            
            isDragging = true;
            offset.x = e.clientX - exitButton.offsetLeft;
            offset.y = e.clientY - exitButton.offsetTop;
            lastClickTime = clickTime;
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            
            const newX = e.clientX - offset.x;
            const newY = e.clientY - offset.y;
            
            const maxX = window.innerWidth - exitButton.offsetWidth;
            const maxY = window.innerHeight - exitButton.offsetHeight;
            
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø­Ø±ÙƒØ© Ø¯Ø§Ø®Ù„ Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ø§Ø´Ø©
            exitButton.style.left = Math.max(0, Math.min(newX, maxX)) + 'px';
            exitButton.style.top = Math.max(0, Math.min(newY, maxY)) + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // ØªØ´ØºÙŠÙ„ ÙˆØ¸ÙŠÙØ© ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù…Ø­ÙÙˆØ¸ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        applySavedMode();
        
    </script>
</body>
</html>